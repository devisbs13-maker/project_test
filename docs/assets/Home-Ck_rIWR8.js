import{r,a as _,j as l,m as f,E as v}from"./index-TtcW4ju4.js";import{H as y}from"./Header-IW1YTDTx.js";import{B as o}from"./Button-eEYrRWER.js";import{R as n}from"./ru-Bg1EDhnZ.js";import{C as N,P as $}from"./PortraitCard-l2D79Jyq.js";import{f as C}from"./time-WGOIUK2d.js";const w="_wrap_yzi99_2",E="_panel_yzi99_11",z="_titleRow_yzi99_24",k="_panelGlow_yzi99_31",F="_appear_yzi99_52 _panel_yzi99_11",R="_buttonList_yzi99_93",T="_btnFull_yzi99_100",a={wrap:w,panel:E,titleRow:z,panelGlow:k,appear:F,buttonList:R,btnFull:T};function H({player:t,onOpenQuests:m,onOpenJobs:d,onOpenArena:u,onOpenGuild:p,onOpenCharacter:x,setScreen:s}){const c=N[t.classId],[g,b]=r.useState(null),[h,j]=r.useState(0);return r.useEffect(()=>{let e=!1;return(async()=>{try{const i=await _();!e&&(i!=null&&i.ok)&&i.data&&b(i.data.tag)}catch(i){}})(),()=>{e=!0}},[]),r.useEffect(()=>{const e=()=>j(f(t.lastEnergyTs,v,t.energy,t.energyMax));e();const i=setInterval(e,1e3);return()=>clearInterval(i)},[t.energy,t.energyMax,t.lastEnergyTs]),l.jsxs("div",{className:a.wrap,children:[l.jsx(y,{title:n.title,gold:t.gold,energy:t.energy,level:t.progress.level,badgeTag:g}),t.name?l.jsxs("div",{style:{margin:"8px 14px",fontSize:12,opacity:.9},children:["üë§ ",t.name]}):null,t.energy<t.energyMax?l.jsxs("div",{style:{margin:"0 14px 8px",fontSize:12,opacity:.75},children:["‚ö° +1 —á–µ—Ä–µ–∑: ",C(h)]}):null,l.jsx("section",{className:"".concat(a.panel," ").concat(a.panelGlow," ").concat(a.appear),children:l.jsx($,{img:c.img,title:"".concat(t.name?"üë§ ".concat(t.name," ‚Ä¢ "):"").concat(c.title),subtitle:"".concat(c.desc,". ").concat(n.stats.level," ").concat(t.progress.level," ‚Ä¢ ").concat(n.stats.energy,": ").concat(t.energy,"/").concat(t.energyMax),size:"md",rightSlot:l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx(o,{className:a.btnFull,onClick:()=>s==null?void 0:s("square"),children:n.navWhere}),l.jsx(o,{className:a.btnFull,onClick:x,children:n.buttons.character})]})})}),l.jsxs("section",{className:"".concat(a.panel," ").concat(a.panelGlow," ").concat(a.appear),children:[l.jsx("div",{className:a.titleRow,children:l.jsx("span",{style:{opacity:.85},children:n.navWhere})}),l.jsxs("div",{className:a.buttonList,children:[l.jsx(o,{className:a.btnFull,onClick:()=>{s==null||s("quests"),m()},children:n.buttons.quests}),l.jsx(o,{className:a.btnFull,onClick:()=>{s==null||s("jobs"),d()},children:n.buttons.jobs}),l.jsx(o,{className:a.btnFull,onClick:()=>s==null?void 0:s("monster"),children:"–ë–æ–π —Å –º–æ–Ω—Å—Ç—Ä–æ–º"}),l.jsx(o,{className:a.btnFull,onClick:()=>s==null?void 0:s("merchant"),children:"–¢–æ—Ä–≥–æ–≤–µ—Ü"}),l.jsx(o,{className:a.btnFull,onClick:()=>s==null?void 0:s("leaderboard"),children:"–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤"}),l.jsx(o,{className:a.btnFull,onClick:u,children:n.buttons.arena}),l.jsx(o,{className:a.btnFull,onClick:p,children:n.buttons.guild})]})]}),l.jsx("section",{className:"".concat(a.panel," ").concat(a.appear),children:l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("span",{style:{opacity:.7,fontSize:12},children:"–ù–∏–∫ –±–µ—Ä—ë—Ç—Å—è –∏–∑ Telegram WebApp"}),l.jsx("button",{onClick:()=>{try{localStorage.removeItem("mirevald:player"),localStorage.removeItem("mirevald:session"),localStorage.removeItem("mirevald:clan")}catch(e){}location.reload()},style:{background:"transparent",border:"none",color:"var(--gold)",cursor:"pointer",fontSize:12,textDecoration:"underline"},"aria-label":"reset-profile",children:"–°–±—Ä–æ—Å–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞"})]})})]})}export{H as default};
