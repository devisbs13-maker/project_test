import{j as e,e as w,r as h,a as C}from"./index-KSIM0t-z.js";import{H as S}from"./Header-Bx5OPXMv.js";import{C as R,P as k}from"./PortraitCard-BJ26oqZt.js";function E({label:n,value:i,max:s}){const l=Math.max(0,Math.min(100,Math.round(i/s*100)));return e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsxs("div",{style:{fontSize:12,opacity:.9},children:[n,": ",i,"/",s]}),e.jsx("div",{style:{height:8,borderRadius:8,background:"rgba(255,255,255,0.06)",overflow:"hidden",border:"1px solid rgba(255,255,255,0.08)"},children:e.jsx("div",{style:{width:"".concat(l,"%"),height:"100%",background:"linear-gradient(90deg, rgba(216,180,106,0.6), rgba(216,180,106,0.9))"}})})]})}const I="_grid_18h21_1",_="_cell_18h21_6",T="_label_18h21_20",p={grid:I,cell:_,label:T},$={common:"rgba(255,255,255,0.10)",uncommon:"rgba(82,196,82,0.5)",rare:"rgba(82,156,255,0.5)",epic:"rgba(196,82,196,0.55)"};function A({items:n,onEquip:i}){return n=Array.isArray(n)?n:[],e.jsx("div",{className:p.grid,children:n.map(s=>e.jsx("button",{className:p.cell,style:{borderColor:$[s.rarity]},title:"".concat(s.name," • Rarity: ").concat(s.rarity),onClick:()=>i(s),children:e.jsx("span",{className:p.label,children:s.name})},s.id))})}function M({player:n,onBack:i,onUpdatePlayer:s}){const l=R[n.classId],c=w(n),[g,v]=h.useState(null);h.useEffect(()=>{let r=!1;return(async()=>{try{const t=await C();!r&&(t!=null&&t.ok)&&t.data&&v(t.data.tag)}catch(t){}})(),()=>{r=!0}},[]);function m(r){var b,x;const t=r.slot;if(r.classReq&&r.classReq!==n.classId){alert("Class mismatch: cannot equip");return}if(((b=r.requiredLevel)!=null?b:1)>n.progress.level){alert("Level required: ".concat(r.requiredLevel));return}const u=n.inventory.filter(y=>y!==r),o=(x=n.equipment[t])!=null?x:null,j={...n.equipment,[t]:r},q=o?[...u,o]:u,f={...n,equipment:j,inventory:q};s(f)}function a(r){var o;const t=(o=n.equipment[r])!=null?o:null;if(!t)return;const u={...n,equipment:{...n.equipment,[r]:null},inventory:[...n.inventory,t]};s(u)}return e.jsxs("div",{style:{padding:16,display:"grid",gap:12},children:[e.jsx(S,{title:"Character",gold:n.gold,energy:n.energy,level:n.progress.level,onBack:i,badgeTag:g}),e.jsx(k,{img:l.img,title:l.title,subtitle:"Level ".concat(n.progress.level," • Energy ").concat(n.energy,"/").concat(n.energyMax).concat(g?" • Clan: ".concat(g):""),size:"lg"}),e.jsxs("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",boxShadow:"var(--shadow)",display:"grid",gap:10},children:[e.jsx("b",{children:"Progress"}),e.jsx(E,{label:"XP",value:n.progress.xp,max:n.progress.xpToNext}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{children:["STR: ",c.str]}),e.jsxs("div",{children:["AGI: ",c.agi]}),e.jsxs("div",{children:["INT: ",c.int]}),e.jsxs("div",{children:["VIT: ",c.vit]})]})]}),e.jsxs("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",boxShadow:"var(--shadow)"},children:[e.jsx("b",{children:"Equipment"}),e.jsx(d,{label:"Weapon",item:n.equipment.weapon,onUnequip:()=>a("weapon")})]}),e.jsxs("section",{style:{display:"grid",gap:10,gridTemplateColumns:"1fr 1fr",alignItems:"start"},children:[e.jsxs("div",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",boxShadow:"var(--shadow)"},children:[e.jsx("b",{children:"Armor"}),e.jsx(d,{label:"Helmet",item:n.equipment.helmet,onUnequip:()=>a("helmet")}),e.jsx(d,{label:"Chest",item:n.equipment.chest,onUnequip:()=>a("chest")}),e.jsx(d,{label:"Pants",item:n.equipment.pants,onUnequip:()=>a("pants")}),e.jsx(d,{label:"Boots",item:n.equipment.boots,onUnequip:()=>a("boots")}),e.jsx(d,{label:"Gloves",item:n.equipment.gloves,onUnequip:()=>a("gloves")})]}),e.jsxs("div",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",boxShadow:"var(--shadow)",display:"grid",gap:8},children:[e.jsx("b",{children:"Inventory"}),e.jsx(A,{items:n.inventory,onEquip:m})]})]})]})}function d({label:n,item:i,onUnequip:s}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[e.jsx("div",{style:{opacity:.9},children:n}),e.jsx("div",{style:{opacity:.9},children:i?e.jsx("span",{children:i.name}):e.jsx("span",{style:{opacity:.7},children:"Empty"})}),e.jsx("div",{children:e.jsx("button",{disabled:!i,onClick:s,className:"mire-btn",style:{padding:"6px 10px",borderRadius:10},children:"Unequip"})})]})}export{M as default};
