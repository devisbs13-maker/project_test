!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function n(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach(function(r){o(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o(r,t,n){return(t=function(r){var t=function(r,t){if("object"!=e(r)||!r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,t||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"==e(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function l(t,n,o,i){var l=n&&n.prototype instanceof u?n:u,s=Object.create(l.prototype);return a(s,"_invoke",function(t,n,o){var i,a,l,u=0,s=o||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(r,t){return i=r,a=0,l=e,p.n=t,c}};function f(t,n){for(a=t,l=n,r=0;!d&&u&&!o&&r<s.length;r++){var o,i=s[r],f=p.p,b=i[2];t>3?(o=b===n)&&(l=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=f&&((o=t<2&&f<i[1])?(a=0,p.v=n,p.n=i[1]):f<b&&(o=t<3||i[0]>n||n>b)&&(i[4]=t,i[5]=n,p.n=b,a=0))}if(o||t>1)return c;throw d=!0,n}return function(o,s,b){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&f(s,b),a=s,l=b;(r=a<2?e:l)||!d;){i||(a?a<3?(a>1&&(p.n=-1),f(a,l)):p.n=l:p.v=l);try{if(u=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,l)))throw TypeError("iterator result is not an object");if(!r.done)return r;l=r.value,a<2&&(a=0)}else 1===a&&(r=i.return)&&r.call(i),a<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((r=(d=p.n<0)?l:t.call(n,p))!==c)break}catch(r){i=e,a=1,l=r}finally{u=1}}return{value:r,done:d}}}(t,o,i),!0),s}var c={};function u(){}function s(){}function d(){}r=Object.getPrototypeOf;var p=[][n]?r(r([][n]())):(a(r={},n,function(){return this}),r),f=d.prototype=u.prototype=Object.create(p);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=d,a(f,"constructor",d),a(d,"constructor",s),s.displayName="GeneratorFunction",a(d,o,"GeneratorFunction"),a(f),a(f,o,"Generator"),a(f,n,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(i=function(){return{w:l,m:b}})()}function a(e,r,t,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,r,t,n){function i(r,t){a(e,r,function(e){return this._invoke(r,t,e)})}r?o?o(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(i("next",0),i("throw",1),i("return",2))},a(e,r,t,n)}function l(e,r,t,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void t(e)}l.done?r(c):Promise.resolve(c).then(n,o)}function c(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(l.push(n.value),l.length!==r);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,r)||u(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,r){if(e){if("string"==typeof e)return s(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,r):void 0}}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}System.register(["./index-legacy-CZT6y1dc.js","./Header-legacy-CtdQkc-K.js","./PortraitCard-legacy-CJOxnmTF.js"],function(e,t){"use strict";var a,u,s,d,p,f,b;return{setters:[function(e){a=e.j,u=e.e,s=e.r,d=e.a},function(e){p=e.H},function(e){f=e.C,b=e.P}],execute:function(){var t=document.createElement("style");function y(e){var r=e.label,t=e.value,n=e.max,o=Math.max(0,Math.min(100,Math.round(t/n*100)));return a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsxs("div",{style:{fontSize:12,opacity:.9},children:[r,": ",t,"/",n]}),a.jsx("div",{style:{height:8,borderRadius:8,background:"rgba(255,255,255,0.06)",overflow:"hidden",border:"1px solid rgba(255,255,255,0.08)"},children:a.jsx("div",{style:{width:"".concat(o,"%"),height:"100%",background:"linear-gradient(90deg, rgba(216,180,106,0.6), rgba(216,180,106,0.9))"}})})]})}t.textContent="._grid_18h21_1{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}._cell_18h21_6{height:64px;border-radius:10px;border:1px solid rgba(255,255,255,.1);background:var(--panel-bg);box-shadow:var(--shadow);color:var(--text);font-size:12px;display:grid;place-items:center;cursor:pointer;transition:transform .08s ease,box-shadow .2s ease,filter .2s ease}._cell_18h21_6:hover{box-shadow:var(--shadow),0 0 16px rgba(216,180,106,.25);filter:brightness(1.04)}._label_18h21_20{opacity:.9;padding:0 6px;text-align:center}\n/*$vite$:1*/",document.head.appendChild(t),e("default",function(e){var t=e.player,v=e.onBack,g=e.onUpdatePlayer,x=f[t.classId],j=u(t),w=c(s.useState(null),2),O=w[0],S=w[1];function _(e){var i,a=null!==(i=t.equipment[e])&&void 0!==i?i:null;if(a){var l=n(n({},t),{},{equipment:n(n({},t.equipment),{},o({},e,null)),inventory:[].concat(r(t.inventory),[a])});g(l)}}return s.useEffect(function(){var e,r=!1;return(e=i().m(function e(){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d();case 1:t=e.v,!r&&null!=t&&t.ok&&t.data&&S(t.data.tag),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}),function(){var r=this,t=arguments;return new Promise(function(n,o){var i=e.apply(r,t);function a(e){l(i,n,o,a,c,"next",e)}function c(e){l(i,n,o,a,c,"throw",e)}a(void 0)})})(),function(){r=!0}},[]),a.jsxs("div",{style:{padding:16,display:"grid",gap:12},children:[a.jsx(p,{title:"Персонаж",gold:t.gold,energy:t.energy,level:t.progress.level,onBack:v,badgeTag:O}),a.jsx(b,{img:x.img,title:x.title,subtitle:"".concat(x.desc,". Ур. ").concat(t.progress.level," • Энергия: ").concat(t.energy,"/").concat(t.energyMax).concat(O?" • Гильдия: ".concat(O):""),size:"lg"}),a.jsxs("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",boxShadow:"var(--shadow)",display:"grid",gap:10},children:[a.jsx("b",{children:"Характеристики"}),a.jsx(y,{label:"XP",value:t.progress.xp,max:t.progress.xpToNext}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsxs("div",{children:["Сила: ",j.str]}),a.jsxs("div",{children:["Ловкость: ",j.agi]}),a.jsxs("div",{children:["Интеллект: ",j.int]}),a.jsxs("div",{children:["Телосложение: ",j.vit]})]})]}),a.jsxs("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",boxShadow:"var(--shadow)"},children:[a.jsx("b",{children:"Оружие"}),a.jsx(m,{label:"Оружие",item:t.equipment.weapon,onUnequip:function(){return _("weapon")}})]}),a.jsxs("section",{style:{display:"grid",gap:10,gridTemplateColumns:"1fr 1fr",alignItems:"start"},children:[a.jsxs("div",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",boxShadow:"var(--shadow)"},children:[a.jsx("b",{children:"Снаряжение"}),a.jsx(m,{label:"Шлем",item:t.equipment.helmet,onUnequip:function(){return _("helmet")}}),a.jsx(m,{label:"Верх",item:t.equipment.chest,onUnequip:function(){return _("chest")}}),a.jsx(m,{label:"Штаны",item:t.equipment.pants,onUnequip:function(){return _("pants")}}),a.jsx(m,{label:"Ботинки",item:t.equipment.boots,onUnequip:function(){return _("boots")}}),a.jsx(m,{label:"Перчатки",item:t.equipment.gloves,onUnequip:function(){return _("gloves")}})]}),a.jsxs("div",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",boxShadow:"var(--shadow)",display:"grid",gap:8},children:[a.jsx("b",{children:"Инвентарь"}),a.jsx(h,{items:t.inventory,onEquip:function(e){var i,a,l=e.slot;if(e.classReq&&e.classReq!==t.classId)return void alert("Нельзя экипировать: предмет другого класса");if((null!==(i=e.requiredLevel)&&void 0!==i?i:1)>t.progress.level)return void alert("Требуется ур. ".concat(e.requiredLevel));var c=t.inventory.filter(function(r){return r!==e}),u=null!==(a=t.equipment[l])&&void 0!==a?a:null,s=n(n({},t.equipment),{},o({},l,e)),d=u?[].concat(r(c),[u]):c,p=n(n({},t),{},{equipment:s,inventory:d});g(p)}})]})]})]})});var v={grid:"_grid_18h21_1",cell:"_cell_18h21_6",label:"_label_18h21_20"},g={common:"rgba(255,255,255,0.10)",uncommon:"rgba(82,196,82,0.5)",rare:"rgba(82,156,255,0.5)",epic:"rgba(196,82,196,0.55)"};function h(e){var r=e.items,t=e.onEquip;return r=Array.isArray(r)?r:[],a.jsx("div",{className:v.grid,children:r.map(function(e){return a.jsx("button",{className:v.cell,style:{borderColor:g[e.rarity]},title:"".concat(e.name," • редкость: ").concat(e.rarity),onClick:function(){return t(e)},children:a.jsx("span",{className:v.label,children:e.name})},e.id)})})}function m(e){var r=e.label,t=e.item,n=e.onUnequip;return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[a.jsx("div",{style:{opacity:.9},children:r}),a.jsx("div",{style:{opacity:.9},children:t?a.jsx("span",{children:t.name}):a.jsx("span",{style:{opacity:.7},children:"пусто"})}),a.jsx("div",{children:a.jsx("button",{disabled:!t,onClick:n,className:"mire-btn",style:{padding:"6px 10px",borderRadius:10},children:"Снять"})})]})}}}})}();
