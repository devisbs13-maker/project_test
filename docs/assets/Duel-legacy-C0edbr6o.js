!function(){function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.toStringTag||"@@toStringTag";function l(n,i,o,a){var l=i&&i.prototype instanceof c?i:c,s=Object.create(l.prototype);return t(s,"_invoke",function(n,t,i){var o,a,l,c=0,s=i||[],d=!1,f={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(n,t){return o=n,a=0,l=e,f.n=t,u}};function v(n,t){for(a=n,l=t,r=0;!d&&c&&!i&&r<s.length;r++){var i,o=s[r],v=f.p,p=o[2];n>3?(i=p===t)&&(l=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=v&&((i=n<2&&v<o[1])?(a=0,f.v=t,f.n=o[1]):v<p&&(i=n<3||o[0]>t||t>p)&&(o[4]=n,o[5]=t,f.n=p,a=0))}if(i||n>1)return u;throw d=!0,t}return function(i,s,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===s&&v(s,p),a=s,l=p;(r=a<2?e:l)||!d;){o||(a?a<3?(a>1&&(f.n=-1),v(a,l)):f.n=l:f.v=l);try{if(c=2,o){if(a||(i="next"),r=o[i]){if(!(r=r.call(o,l)))throw TypeError("iterator result is not an object");if(!r.done)return r;l=r.value,a<2&&(a=0)}else 1===a&&(r=o.return)&&r.call(o),a<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((r=(d=f.n<0)?l:n.call(t,f))!==u)break}catch(r){o=e,a=1,l=r}finally{c=1}}return{value:r,done:d}}}(n,o,a),!0),s}var u={};function c(){}function s(){}function d(){}r=Object.getPrototypeOf;var f=[][o]?r(r([][o]())):(t(r={},o,function(){return this}),r),v=d.prototype=c.prototype=Object.create(f);function p(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,d):(n.__proto__=d,t(n,a,"GeneratorFunction")),n.prototype=Object.create(v),n}return s.prototype=d,t(v,"constructor",d),t(d,"constructor",s),s.displayName="GeneratorFunction",t(d,a,"GeneratorFunction"),t(v),t(v,a,"Generator"),t(v,o,function(){return this}),t(v,"toString",function(){return"[object Generator]"}),(n=function(){return{w:l,m:p}})()}function t(n,e,r,i){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}t=function(n,e,r,i){function a(e,r){t(n,e,function(n){return this._invoke(e,r,n)})}e?o?o(n,e,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[e]=r:(a("next",0),a("throw",1),a("return",2))},t(n,e,r,i)}function e(n,t,e,r,i,o,a){try{var l=n[o](a),u=l.value}catch(n){return void e(n)}l.done?t(u):Promise.resolve(u).then(r,i)}function r(n){return function(){var t=this,r=arguments;return new Promise(function(i,o){var a=n.apply(t,r);function l(n){e(a,i,o,l,u,"next",n)}function u(n){e(a,i,o,l,u,"throw",n)}l(void 0)})}}function i(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var r,i,o,a,l=[],u=!0,c=!1;try{if(o=(e=e.call(n)).next,0===t){if(Object(e)!==e)return;u=!1}else for(;!(u=(r=o.call(e)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(n){c=!0,i=n}finally{try{if(!u&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(n,t)||function(n,t){if(n){if("string"==typeof n)return o(n,t);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}System.register(["./index-legacy-DoDmSFVJ.js","./Header-legacy-UBhrvKJ2.js","./Button-legacy-DbzjYXG0.js"],function(t,e){"use strict";var o,a,l,u,c,s,d,f;return{setters:[function(n){o=n.r,a=n.j,l=n.q,u=n.t,c=n.v,s=n.w},function(n){d=n.H},function(n){f=n.B}],execute:function(){function e(n){var t,e,r=n.label,i=n.data,o=n.active;return a.jsxs("div",{style:{flex:1,padding:10,borderRadius:12,border:"1px solid rgba(255,255,255,0.1)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsxs("b",{children:[r,": ",(null==i?void 0:i.name)||"-"]}),o&&a.jsx("span",{style:{opacity:.8},children:"Your turn"})]}),a.jsxs("div",{style:{marginTop:6},children:["HP: ",null!==(t=null==i?void 0:i.hp)&&void 0!==t?t:0,"/",null!==(e=null==i?void 0:i.maxHp)&&void 0!==e?e:0]})]})}t("default",function(t){var v,p,y,h,b,g=t.player,j=t.onBack,x=i(o.useState(""),2),m=x[0],k=x[1],w=i(o.useState(""),2),S=w[0],O=w[1],A=i(o.useState(null),2),C=A[0],T=A[1],P=o.useMemo(function(){var n,t,e;if(null==C||null===(n=C.data)||void 0===n||!n.state)return!1;var r=C.data.state,i="A"===r.current,o=null===(t=r.a)||void 0===t?void 0:t.id,a=null===(e=r.b)||void 0===e?void 0:e.id;return(i?o:a)===g.id||void 0===(i?o:a)},[C,g]);function B(){return(B=r(n().m(function t(){var e;return n().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,u();case 1:null!=(e=n.v)&&e.ok&&e.id&&k(e.id);case 2:return n.a(2)}},t)}))).apply(this,arguments)}function E(){return(E=r(n().m(function t(){var e;return n().w(function(n){for(;;)switch(n.n){case 0:if(S){n.n=1;break}return n.a(2);case 1:return n.n=2,c(S.trim());case 2:null!=(e=n.v)&&e.ok&&e.id&&k(e.id);case 3:return n.a(2)}},t)}))).apply(this,arguments)}function G(n){return _.apply(this,arguments)}function _(){return(_=r(n().m(function t(e){var r;return n().w(function(n){for(;;)switch(n.n){case 0:if(m){n.n=1;break}return n.a(2);case 1:return n.n=2,s(m,e);case 2:null!=(r=n.v)&&r.ok&&T(r);case 3:return n.a(2)}},t)}))).apply(this,arguments)}o.useEffect(function(){if(m){var t=!1,e=function(){var i=r(n().m(function r(){var i,o;return n().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,l(m);case 1:o=n.v,!t&&null!=o&&o.ok&&T(o),n.n=3;break;case 2:n.p=2,n.v;case 3:t||"finished"===(null==C||null===(i=C.data)||void 0===i?void 0:i.status)||setTimeout(e,1500);case 4:return n.a(2)}},r,null,[[0,2]])}));return function(){return i.apply(this,arguments)}}();return e(),function(){t=!0}}},[m]);var R=(null==C||null===(v=C.data)||void 0===v?void 0:v.state)||null;return a.jsxs("div",{style:{display:"grid",gap:12,padding:16},children:[a.jsx(d,{title:"PvP Duel",gold:g.gold,energy:g.energy,level:g.progress.level,onBack:j}),!m&&a.jsx("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",display:"grid",gap:8},children:a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx(f,{onClick:function(){return B.apply(this,arguments)},children:"Create Challenge"}),a.jsx("input",{value:S,onChange:function(n){return O(n.target.value)},placeholder:"Enter duel id",style:{flex:1,padding:"8px 10px",borderRadius:10,background:"transparent",border:"1px solid rgba(255,255,255,0.15)",color:"inherit"}}),a.jsx(f,{onClick:function(){return E.apply(this,arguments)},disabled:!S,children:"Accept"})]})}),m&&a.jsxs("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",display:"grid",gap:10},children:[a.jsxs("div",{style:{opacity:.9},children:["Duel ID: ",a.jsx("code",{children:m})]}),a.jsxs("div",{style:{display:"flex",gap:12},children:[a.jsx(e,{label:"A",data:null==R?void 0:R.a,active:"A"===(null==R?void 0:R.current)}),a.jsx(e,{label:"B",data:null==R?void 0:R.b,active:"B"===(null==R?void 0:R.current)})]}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx(f,{onClick:function(){return G("attack")},disabled:!P||"finished"===(null==C||null===(p=C.data)||void 0===p?void 0:p.status),children:"Attack"}),a.jsx(f,{onClick:function(){return G("defend")},disabled:!P||"finished"===(null==C||null===(y=C.data)||void 0===y?void 0:y.status),children:"Defend"}),a.jsx(f,{onClick:function(){return G("skill")},disabled:!P||"finished"===(null==C||null===(h=C.data)||void 0===h?void 0:h.status),children:"Skill"})]}),a.jsxs("div",{style:{padding:10,borderRadius:10,background:"rgba(255,255,255,0.04)"},children:[a.jsx("b",{children:"Log"}),a.jsx("div",{style:{display:"grid",gap:4,marginTop:6},children:((null==R?void 0:R.log)||[]).slice().reverse().map(function(n,t){return a.jsx("div",{style:{opacity:.9},children:n},t)})})]}),"finished"===(null==C||null===(b=C.data)||void 0===b?void 0:b.status)&&a.jsx("div",{style:{fontWeight:700},children:"Finished"})]})]})})}}})}();
