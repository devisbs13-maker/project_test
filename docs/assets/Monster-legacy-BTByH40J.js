!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function i(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,l,a=[],u=!0,d=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);u=!0);}catch(t){d=!0,i=t}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw i}}return a}}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return a(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}System.register(["./index-legacy-DqIMhorD.js","./Header-legacy-DWRb-Zh_.js","./Button-legacy-CPbMXTUf.js","./progression-legacy-C8oFHf2V.js","./time-legacy-CAhSdEcu.js","./catalog-legacy-B8sB8at-.js","./index-legacy-ConR_zjY.js","./ru-legacy-DKJfoWCU.js"],function(t,r){"use strict";var i,l,a,u,d,s,c,f,v,y,g,h,m,p,b,j,x,M,w;return{setters:[function(t){i=t.r,l=t.e,a=t.j,u=t.n,d=t.b,s=t.s},function(t){c=t.H},function(t){f=t.B},function(t){v=t.a,y=t.i,g=t.M,h=t.T,m=t.l,p=t.b,b=t.c,j=t.g},function(t){x=t.r},function(t){M=t.C},function(t){w=t.g},null],execute:function(){function r(t){var e=Math.max(0,Math.floor(t/1e3)),r=Math.floor(e/60).toString().padStart(2,"0"),n=(e%60).toString().padStart(2,"0");return"".concat(r,":").concat(n)}t("default",function(t){var S,O,A,P,k,I,R,q,D=t.player,C=t.onBack,E=t.onUpdatePlayer,B=w(),T=o(i.useState(function(){return v()}),2),W=T[0],F=T[1],H=y(W),z=W?x(W.endsAt):0,L=i.useMemo(function(){var t=l(D);return t.str+t.agi+t.int+t.vit+2*D.progress.level},[D]);return i.useEffect(function(){var t=setInterval(function(){return F(v())},1e3);return function(){return clearInterval(t)}},[]),a.jsxs("div",{style:{display:"grid",gap:12,padding:16},children:[a.jsx(c,{title:null!==(S=null===(O=B.buttons)||void 0===O?void 0:O.monster)&&void 0!==S?S:"Monster Hunt",gold:D.gold,energy:D.energy,level:D.progress.level,onBack:C}),!H&&a.jsx("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)"},children:a.jsx("div",{style:{display:"grid",gap:8},children:a.jsx("div",{style:{display:"grid",gap:8},children:e(g).sort(function(t,e){return t.diffMul-e.diffMul}).map(function(t){var e,r,n,i,o,l,u,d,s=D.progress.level,c=Math.round((40+8*s)*t.diffMul),v=.5+(L-c)/100,y=Math.max(.05,Math.min(.95,v));return a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",borderRadius:12,background:"var(--panel-bg)",border:"1px solid rgba(255,255,255,0.08)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[t.image?a.jsx("img",{src:t.image,alt:t.name,style:{width:40,height:40,objectFit:"cover",borderRadius:8}}):a.jsx("div",{style:{width:40,height:40,borderRadius:8,background:"rgba(255,255,255,0.07)"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:700},children:t.name}),a.jsxs("div",{style:{opacity:.85,fontSize:12},children:[null!==(e=null===(r=B.monster)||void 0===r?void 0:r.difficulty)&&void 0!==e?e:"Difficulty",": ",c," • ",null!==(n=null===(i=B.monster)||void 0===i?void 0:i.winChance)&&void 0!==n?n:"Win chance",": ",Math.round(100*y),"% • ",null!==(o=null===(l=B.monster)||void 0===l?void 0:l.reward)&&void 0!==o?o:"Reward"," x",t.rewardMul]})]})]}),a.jsx(f,{onClick:function(){return function(t){if(H)return;try{var e,r;if((m().active||[]).length>0)return void alert(null!==(e=null===(r=B.monster)||void 0===r?void 0:r.finishOthers)&&void 0!==e?e:"Finish other activities first (quests/jobs).")}catch(i){}var n=p(D,t);F(n)}(t)},children:null!==(u=null===(d=B.monster)||void 0===d?void 0:d.fight)&&void 0!==u?u:"Fight"})]},t.id)})})})}),H&&W&&a.jsx("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)"},children:a.jsxs("div",{style:{display:"grid",gap:8},children:[a.jsx("div",{style:{fontWeight:700},children:W.monster}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx(h,{endsAt:W.endsAt}),a.jsx("span",{style:{opacity:.85},children:r(z)})]}),a.jsxs("div",{style:{opacity:.85,fontSize:12},children:[null!==(A=null===(P=B.monster)||void 0===P?void 0:P.power)&&void 0!==A?A:"Power",": ",L," • ",null!==(k=null===(I=B.monster)||void 0===I?void 0:I.difficulty)&&void 0!==k?k:"Difficulty",": ",W.difficulty]}),a.jsx(f,{disabled:x(W.endsAt)>0,onClick:function(){if(!W)return;if(x(W.endsAt)>0)return;var t=W.difficulty,r=.5+(L-t)/100,i=Math.max(.05,Math.min(.95,r)),o=Math.random()<i;if(b(null),F(null),o){var l,a,c,f,v=D.progress.level,y=L-t,g=Math.max(.7,Math.min(1.5,1+y/120)),h=null!==(l=W.rewardMul)&&void 0!==l?l:1,m=.9+.2*Math.random(),p=Math.max(5,Math.round((30+6*v)*g*h*m)),w=Math.max(5,Math.round((18+3*v)*g*h*m)),S=j(D,{gold:p,xp:w}),O=Math.max(0,Math.min(30,null!==(a=D.luck)&&void 0!==a?a:0)),A=Math.max(.08,Math.min(.5,.18+.008*O+.003*Math.max(0,y)));if(Math.random()<A){var P,k=[{t:1,lvl:1},{t:2,lvl:20},{t:3,lvl:40},{t:4,lvl:60}],I=null!==(P=[].concat(k).reverse().find(function(t){return v>=t.lvl}))&&void 0!==P?P:k[0],R=D.classId,q=M.filter(function(t){return t.classReq===R&&/_t\d+$/.test(t.id)&&t.id.endsWith("t".concat(I.t))});if(q.length>0){var C=q[Math.floor(Math.random()*q.length)],T={id:C.id,name:C.name,slot:C.slot,rarity:C.rarity,requiredLevel:C.requiredLevel,classReq:C.classReq};S=n(n({},S),{},{inventory:[].concat(e(S.inventory),[T])})}}u("quest",null!==(c=null===(f=B.monster)||void 0===f?void 0:f.defeated)&&void 0!==c?c:"Monster defeated",{gold:p,xp:w});try{var H,z;d(null!==(H=null===(z=B.monster)||void 0===z?void 0:z.victory)&&void 0!==H?H:"Victory! Rewards granted.")}catch(N){}s(S),E(S)}else try{var U,$;d(null!==(U=null===($=B.monster)||void 0===$?void 0:$.defeat)&&void 0!==U?U:"Defeat. Try a weaker monster.")}catch(V){}},children:null!==(R=null===(q=B.monster)||void 0===q?void 0:q.resolve)&&void 0!==R?R:"Resolve Battle"})]})})]})})}}})}();
