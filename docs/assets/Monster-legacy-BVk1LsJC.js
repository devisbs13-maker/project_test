!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function i(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,l=[],c=!0,s=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){s=!0,i=t}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(s)throw i}}return l}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return l(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}System.register(["./index-legacy-C54gzF4w.js","./Header-legacy-tXmvuVNU.js","./Button-legacy-DeRXUO5G.js","./progression-legacy-BlqE10sL.js","./time-legacy-CAhSdEcu.js","./catalog-legacy-B8sB8at-.js"],function(t,r){"use strict";var i,o,l,c,s,u,d,f,y,h,g,p,v,b,m,j,x,M;return{setters:[function(t){i=t.r,o=t.e,l=t.j,c=t.n,s=t.b,u=t.s},function(t){d=t.H},function(t){f=t.B},function(t){y=t.a,h=t.i,g=t.M,p=t.T,v=t.l,b=t.b,m=t.c,j=t.g},function(t){x=t.r},function(t){M=t.C}],execute:function(){function r(t){var e=Math.max(0,Math.floor(t/1e3)),r=Math.floor(e/60).toString().padStart(2,"0"),n=(e%60).toString().padStart(2,"0");return"".concat(r,":").concat(n)}t("default",function(t){var S=t.player,w=t.onBack,O=t.onUpdatePlayer,A=a(i.useState(function(){return y()}),2),P=A[0],k=A[1],I=h(P),R=P?x(P.endsAt):0,q=i.useMemo(function(){var t=o(S);return t.str+t.agi+t.int+t.vit+2*S.progress.level},[S]);return i.useEffect(function(){var t=setInterval(function(){return k(y())},1e3);return function(){return clearInterval(t)}},[]),l.jsxs("div",{style:{display:"grid",gap:12,padding:16},children:[l.jsx(d,{title:"Monster Hunt",gold:S.gold,energy:S.energy,level:S.progress.level,onBack:w}),!I&&l.jsx("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)"},children:l.jsx("div",{style:{display:"grid",gap:8},children:l.jsx("div",{style:{display:"grid",gap:8},children:e(g).sort(function(t,e){return t.diffMul-e.diffMul}).map(function(t){var e=S.progress.level,r=Math.round((40+8*e)*t.diffMul),n=.5+(q-r)/100,i=Math.max(.05,Math.min(.95,n));return l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",borderRadius:12,background:"var(--panel-bg)",border:"1px solid rgba(255,255,255,0.08)"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[t.image?l.jsx("img",{src:t.image,alt:t.name,style:{width:40,height:40,objectFit:"cover",borderRadius:8}}):l.jsx("div",{style:{width:40,height:40,borderRadius:8,background:"rgba(255,255,255,0.07)"}}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:700},children:t.name}),l.jsxs("div",{style:{opacity:.85,fontSize:12},children:["Difficulty: ",r," · Win chance: ",Math.round(100*i),"% · Reward x",t.rewardMul]})]})]}),l.jsx(f,{onClick:function(){return function(t){if(I)return;try{if((v().active||[]).length>0)return void alert("Finish other activities first (quests/jobs).")}catch(r){}var e=b(S,t);k(e)}(t)},children:"Fight"})]},t.id)})})})}),I&&P&&l.jsx("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)"},children:l.jsxs("div",{style:{display:"grid",gap:8},children:[l.jsx("div",{style:{fontWeight:700},children:P.monster}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx(p,{endsAt:P.endsAt}),l.jsx("span",{style:{opacity:.85},children:r(R)})]}),l.jsxs("div",{style:{opacity:.85,fontSize:12},children:["Power: ",q," · Difficulty: ",P.difficulty]}),l.jsx(f,{disabled:x(P.endsAt)>0,onClick:function(){if(!P)return;if(x(P.endsAt)>0)return;var t=P.difficulty,r=.5+(q-t)/100,i=Math.max(.05,Math.min(.95,r)),a=Math.random()<i;if(m(null),k(null),a){var o,l,d=S.progress.level,f=q-t,y=Math.max(.7,Math.min(1.5,1+f/120)),h=null!==(o=P.rewardMul)&&void 0!==o?o:1,g=.9+.2*Math.random(),p=Math.max(5,Math.round((30+6*d)*y*h*g)),v=Math.max(5,Math.round((18+3*d)*y*h*g)),b=j(S,{gold:p,xp:v}),w=Math.max(0,Math.min(30,null!==(l=S.luck)&&void 0!==l?l:0)),A=Math.max(.08,Math.min(.5,.18+.008*w+.003*Math.max(0,f)));if(Math.random()<A){var I,R=[{t:1,lvl:1},{t:2,lvl:20},{t:3,lvl:40},{t:4,lvl:60}],D=null!==(I=[].concat(R).reverse().find(function(t){return d>=t.lvl}))&&void 0!==I?I:R[0],E=S.classId,B=M.filter(function(t){return t.classReq===E&&/_t\d+$/.test(t.id)&&t.id.endsWith("t".concat(D.t))});if(B.length>0){var C=B[Math.floor(Math.random()*B.length)],T={id:C.id,name:C.name,slot:C.slot,rarity:C.rarity,requiredLevel:C.requiredLevel,classReq:C.classReq};b=n(n({},b),{},{inventory:[].concat(e(b.inventory),[T])})}}c("quest","Monster defeated",{gold:p,xp:v});try{s("Victory! Rewards granted.")}catch(W){}u(b),O(b)}else try{s("Defeat. Try a weaker monster.")}catch(F){}},children:"Resolve Battle"})]})})]})})}}})}();
