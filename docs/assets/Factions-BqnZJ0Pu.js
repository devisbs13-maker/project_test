import{r as o,x as y,y as u,j as n,z as f,A as j}from"./index-BkG-L4U0.js";import{H as m}from"./Header-A0ABZ2Cj.js";import{B as r}from"./Button-DN0mJy_h.js";function k({player:t,onBack:l}){var c;const[d,p]=o.useState([]),[s,a]=o.useState(null);o.useEffect(()=>{(async()=>{var e;try{const i=await y();i!=null&&i.ok&&i.items&&p(i.items)}catch(i){}try{const i=await u();i!=null&&i.ok&&a((e=i.factionId)!=null?e:null)}catch(i){}})()},[]);async function g(e){const i=await f(e);i!=null&&i.ok&&i.factionId&&a(i.factionId)}async function x(){const e=await j();e!=null&&e.ok&&a(null)}return n.jsxs("div",{style:{display:"grid",gap:12,padding:16},children:[n.jsx(m,{title:"Factions",gold:t.gold,energy:t.energy,level:t.progress.level,onBack:l}),n.jsxs("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",display:"grid",gap:10},children:[n.jsxs("div",{style:{opacity:.9},children:["Your faction: ",n.jsx("b",{children:s?((c=d.find(e=>e.id===s))==null?void 0:c.name)||s:"None"})]}),s&&n.jsx(r,{onClick:x,children:"Leave faction"})]}),n.jsx("section",{style:{display:"grid",gap:8},children:d.map(e=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",borderRadius:12,background:"var(--panel-bg)",border:"1px solid rgba(255,255,255,0.08)"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:700},children:e.name}),n.jsxs("div",{style:{opacity:.85,fontSize:12},children:["Members: ",e.members]})]}),n.jsxs(r,{onClick:()=>g(e.id),disabled:s===e.id,children:[" ",s===e.id?"Joined":"Join"," "]})]},e.id))})]})}export{k as default};
