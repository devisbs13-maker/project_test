!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function n(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach(function(r){o(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o(r,t,n){return(t=function(r){var t=function(r,t){if("object"!=e(r)||!r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,t||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"==e(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function l(t,n,o,i){var l=n&&n.prototype instanceof u?n:u,s=Object.create(l.prototype);return a(s,"_invoke",function(t,n,o){var i,a,l,u=0,s=o||[],d=!1,v={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(r,t){return i=r,a=0,l=e,v.n=t,c}};function p(t,n){for(a=t,l=n,r=0;!d&&u&&!o&&r<s.length;r++){var o,i=s[r],p=v.p,f=i[2];t>3?(o=f===n)&&(l=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=t<2&&p<i[1])?(a=0,v.v=n,v.n=i[1]):p<f&&(o=t<3||i[0]>n||n>f)&&(i[4]=t,i[5]=n,v.n=f,a=0))}if(o||t>1)return c;throw d=!0,n}return function(o,s,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&p(s,f),a=s,l=f;(r=a<2?e:l)||!d;){i||(a?a<3?(a>1&&(v.n=-1),p(a,l)):v.n=l:v.v=l);try{if(u=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,l)))throw TypeError("iterator result is not an object");if(!r.done)return r;l=r.value,a<2&&(a=0)}else 1===a&&(r=i.return)&&r.call(i),a<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((r=(d=v.n<0)?l:t.call(n,v))!==c)break}catch(r){i=e,a=1,l=r}finally{u=1}}return{value:r,done:d}}}(t,o,i),!0),s}var c={};function u(){}function s(){}function d(){}r=Object.getPrototypeOf;var v=[][n]?r(r([][n]())):(a(r={},n,function(){return this}),r),p=d.prototype=u.prototype=Object.create(v);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=d,a(p,"constructor",d),a(d,"constructor",s),s.displayName="GeneratorFunction",a(d,o,"GeneratorFunction"),a(p),a(p,o,"Generator"),a(p,n,function(){return this}),a(p,"toString",function(){return"[object Generator]"}),(i=function(){return{w:l,m:f}})()}function a(e,r,t,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,r,t,n){function i(r,t){a(e,r,function(e){return this._invoke(r,t,e)})}r?o?o(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(i("next",0),i("throw",1),i("return",2))},a(e,r,t,n)}function l(e,r,t,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void t(e)}l.done?r(c):Promise.resolve(c).then(n,o)}function c(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(l.push(n.value),l.length!==r);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,r)||u(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,r){if(e){if("string"==typeof e)return s(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,r):void 0}}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}System.register(["./index-legacy-DqIMhorD.js","./Header-legacy-DWRb-Zh_.js","./PortraitCard-legacy-BE_Xdu6y.js","./index-legacy-ConR_zjY.js","./ru-legacy-DKJfoWCU.js"],function(e,t){"use strict";var a,u,s,d,v,p,f,b;return{setters:[function(e){a=e.j,u=e.e,s=e.r,d=e.a},function(e){v=e.H},function(e){p=e.C,f=e.P},function(e){b=e.g},null],execute:function(){var t=document.createElement("style");function y(e){var r=e.label,t=e.value,n=e.max,o=Math.max(0,Math.min(100,Math.round(t/n*100)));return a.jsxs("div",{style:{display:"grid",gap:6},children:[a.jsxs("div",{style:{fontSize:12,opacity:.9},children:[r,": ",t,"/",n]}),a.jsx("div",{style:{height:8,borderRadius:8,background:"rgba(255,255,255,0.06)",overflow:"hidden",border:"1px solid rgba(255,255,255,0.08)"},children:a.jsx("div",{style:{width:"".concat(o,"%"),height:"100%",background:"linear-gradient(90deg, rgba(216,180,106,0.6), rgba(216,180,106,0.9))"}})})]})}t.textContent="._grid_18h21_1{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}._cell_18h21_6{height:64px;border-radius:10px;border:1px solid rgba(255,255,255,.1);background:var(--panel-bg);box-shadow:var(--shadow);color:var(--text);font-size:12px;display:grid;place-items:center;cursor:pointer;transition:transform .08s ease,box-shadow .2s ease,filter .2s ease}._cell_18h21_6:hover{box-shadow:var(--shadow),0 0 16px rgba(216,180,106,.25);filter:brightness(1.04)}._label_18h21_20{opacity:.9;padding:0 6px;text-align:center}\n/*$vite$:1*/",document.head.appendChild(t),e("default",function(e){var t,h,g,j,w,q,O,S,_,P,k,T,C,E,A,I,R,U,G,N,M,D,z,B,F=e.player,H=e.onBack,L=e.onUpdatePlayer,$=b(),W=p[F.classId],V=u(F),X=c(s.useState(null),2),J=X[0],K=X[1];function Q(e){var t,i=null!==(t=F.equipment[e])&&void 0!==t?t:null;if(i){var a=n(n({},F),{},{equipment:n(n({},F.equipment),{},o({},e,null)),inventory:[].concat(r(F.inventory),[i])});L(a)}}return s.useEffect(function(){var e,r=!1;return(e=i().m(function e(){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d();case 1:t=e.v,!r&&null!=t&&t.ok&&t.data&&K(t.data.tag),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}),function(){var r=this,t=arguments;return new Promise(function(n,o){var i=e.apply(r,t);function a(e){l(i,n,o,a,c,"next",e)}function c(e){l(i,n,o,a,c,"throw",e)}a(void 0)})})(),function(){r=!0}},[]),a.jsxs("div",{style:{padding:16,display:"grid",gap:12},children:[a.jsx(v,{title:null!==(t=null===(h=$.buttons)||void 0===h?void 0:h.character)&&void 0!==t?t:"Character",gold:F.gold,energy:F.energy,level:F.progress.level,onBack:H,badgeTag:J}),a.jsx(f,{img:W.img,title:W.title,subtitle:"".concat($.stats.level," ").concat(F.progress.level," • ").concat($.stats.energy," ").concat(F.energy,"/").concat(F.energyMax).concat(J?" • Clan: ".concat(J):""),size:"lg"}),a.jsxs("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",boxShadow:"var(--shadow)",display:"grid",gap:10},children:[a.jsx("b",{children:null!==(g=null===(j=$.character)||void 0===j?void 0:j.progress)&&void 0!==g?g:"Progress"}),a.jsx(y,{label:null!==(w=null===(q=$.character)||void 0===q?void 0:q.xp)&&void 0!==w?w:"XP",value:F.progress.xp,max:F.progress.xpToNext}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsxs("div",{children:["STR: ",V.str]}),a.jsxs("div",{children:["AGI: ",V.agi]}),a.jsxs("div",{children:["INT: ",V.int]}),a.jsxs("div",{children:["VIT: ",V.vit]})]})]}),a.jsxs("section",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",boxShadow:"var(--shadow)"},children:[a.jsx("b",{children:null!==(O=null===(S=$.character)||void 0===S?void 0:S.equipment)&&void 0!==O?O:"Equipment"}),a.jsx(x,{label:null!==(_=null===(P=$.character)||void 0===P?void 0:P.weapon)&&void 0!==_?_:"Weapon",item:F.equipment.weapon,onUnequip:function(){return Q("weapon")}})]}),a.jsxs("section",{style:{display:"grid",gap:10,gridTemplateColumns:"1fr 1fr",alignItems:"start"},children:[a.jsxs("div",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",boxShadow:"var(--shadow)"},children:[a.jsx("b",{children:null!==(k=null===(T=$.character)||void 0===T?void 0:T.armor)&&void 0!==k?k:"Armor"}),a.jsx(x,{label:null!==(C=null===(E=$.character)||void 0===E?void 0:E.helmet)&&void 0!==C?C:"Helmet",item:F.equipment.helmet,onUnequip:function(){return Q("helmet")}}),a.jsx(x,{label:null!==(A=null===(I=$.character)||void 0===I?void 0:I.chest)&&void 0!==A?A:"Chest",item:F.equipment.chest,onUnequip:function(){return Q("chest")}}),a.jsx(x,{label:null!==(R=null===(U=$.character)||void 0===U?void 0:U.pants)&&void 0!==R?R:"Pants",item:F.equipment.pants,onUnequip:function(){return Q("pants")}}),a.jsx(x,{label:null!==(G=null===(N=$.character)||void 0===N?void 0:N.boots)&&void 0!==G?G:"Boots",item:F.equipment.boots,onUnequip:function(){return Q("boots")}}),a.jsx(x,{label:null!==(M=null===(D=$.character)||void 0===D?void 0:D.gloves)&&void 0!==M?M:"Gloves",item:F.equipment.gloves,onUnequip:function(){return Q("gloves")}})]}),a.jsxs("div",{style:{padding:12,borderRadius:16,background:"var(--panel-bg)",border:"var(--panel-border)",boxShadow:"var(--shadow)",display:"grid",gap:8},children:[a.jsx("b",{children:null!==(z=null===(B=$.character)||void 0===B?void 0:B.inventory)&&void 0!==z?z:"Inventory"}),a.jsx(m,{items:F.inventory,onEquip:function(e){var t,i,a=e.slot;if(e.classReq&&e.classReq!==F.classId){var l,c;return void alert(null!==(l=null===(c=$.character)||void 0===c?void 0:c.classMismatch)&&void 0!==l?l:"Class mismatch: cannot equip")}if((null!==(t=e.requiredLevel)&&void 0!==t?t:1)>F.progress.level){var u,s;return void alert("".concat(null!==(u=null===(s=$.character)||void 0===s?void 0:s.levelReq)&&void 0!==u?u:"Level required",": ").concat(e.requiredLevel))}var d=F.inventory.filter(function(r){return r!==e}),v=null!==(i=F.equipment[a])&&void 0!==i?i:null,p=n(n({},F.equipment),{},o({},a,e)),f=v?[].concat(r(d),[v]):d,b=n(n({},F),{},{equipment:p,inventory:f});L(b)}})]})]})]})});var h={grid:"_grid_18h21_1",cell:"_cell_18h21_6",label:"_label_18h21_20"},g={common:"rgba(255,255,255,0.10)",uncommon:"rgba(82,196,82,0.5)",rare:"rgba(82,156,255,0.5)",epic:"rgba(196,82,196,0.55)"};function m(e){var r=e.items,t=e.onEquip;return r=Array.isArray(r)?r:[],a.jsx("div",{className:h.grid,children:r.map(function(e){var r,n;return a.jsx("button",{className:h.cell,style:{borderColor:g[e.rarity]},title:"".concat(e.name," • ").concat(null!==(r=null===(n=b().merchant)||void 0===n?void 0:n.rarity)&&void 0!==r?r:"Rarity",": ").concat(e.rarity),onClick:function(){return t(e)},children:a.jsx("span",{className:h.label,children:e.name})},e.id)})})}function x(e){var r,t,n,o,i=e.label,l=e.item,c=e.onUnequip;return a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[a.jsx("div",{style:{opacity:.9},children:i}),a.jsx("div",{style:{opacity:.9},children:l?a.jsx("span",{children:l.name}):a.jsx("span",{style:{opacity:.7},children:null!==(r=null===(t=b().character)||void 0===t?void 0:t.empty)&&void 0!==r?r:"Empty"})}),a.jsx("div",{children:a.jsx("button",{disabled:!l,onClick:c,className:"mire-btn",style:{padding:"6px 10px",borderRadius:10},children:null!==(n=null===(o=b().character)||void 0===o?void 0:o.unequip)&&void 0!==n?n:"Unequip"})})]})}}}})}();
